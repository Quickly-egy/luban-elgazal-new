# ๐ ุชูุงูู API ุชุญุฏูุซ ุจูุงูุงุช ุงูุดุญู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู ูุธุงู ุดุงูู ูุชุญุฏูุซ ุจูุงูุงุช ุงูุดุญู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู ุจุนุฏ ูุฌุงุญ ุทูุจ ุงูุดุญู ูุน ุดุฑูุฉ ุงูุดุญู.

## ๐ ุงูููุฒุงุช ุงูููุถุงูุฉ

### 1. โ ุงูุชุญุฏูุซ ุงูุชููุงุฆู
- **ูุญุฏุซ ุชููุงุฆูุงู** ุจุนุฏ ูุฌุงุญ ุทูุจ ุงูุดุญู
- **ูุง ูุชุทูุจ ุชุฏุฎู ูุฏูู** ูู ุงููุทูุฑ
- **ูุณุชุฎุฏู ุงููุนุงููุงุช ุงูููุณุชุฎุฑุฌุฉ** ูู ุงุณุชุฌุงุจุฉ ุงูุดุญู

### 2. ๐ง APIs ุชุญุฏูุซ ุงูุจูุงูุงุช
- **API ุฃุณุงุณู (ูุฏูู):** `PATCH /orders/{orderId}/shipping` - ุจูุงูุงุช ุฃุณุงุณูุฉ
- **API ููุตู (ุฌุฏูุฏ):** `PUT /external-order/update-shipping` - ุจูุงูุงุช ุดุงููุฉ
- **ุชุฑุชูุจ ุงูุนูู:** ุงูุฃุณุงุณู ุฃููุงูุ ุซู ุงูููุตู ุชููุงุฆูุงู
- **ูุฑููุฉ ูู ุงูุชุญุฏูุซ** (ุญููู ูุญุฏุฏุฉ ุฃู ูุงููุฉ)

### 3. ๐ ุชุชุจุน ุดุงูู ูู ุงููููุณูู
- **ุนุฑุถ ููุตู** ูุญุงูุฉ ุงูุชุญุฏูุซ
- **ุชุณุฌูู ุฌููุน ุงูุฃุฎุทุงุก** ูุงููุฌุงุญุงุช
- **ูุนูููุงุช ูููุฏุฉ ููุชุทููุฑ** ูุงูุชุดุฎูุต

## ๐ ููู ูุนูู ุงููุธุงู

### ุงููุณุงุฑ ุงูุชููุงุฆู:
```
1. ุฅูุดุงุก ุทูุจ ุดุญู ูุน ุดุฑูุฉ ุงูุดุญู โ
   โ
2. ูุฌุงุญ ุงูุทูุจ + ุงุณุชุฎุฑุงุฌ ุงููุนุงููุงุช โ
   โ 
3. ุชุญุฏูุซ ุฃุณุงุณู ููุทูุจ (API ูุฏูู) โ
   โ
4. ุชุญุฏูุซ ููุตู ููุดุญู (API ุฌุฏูุฏ) ๐
   โ
5. ุนุฑุถ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ โ
```

## ๐ ูุง ุณุชุดููู ูู ุงููููุณูู

### ุนูุฏ ูุฌุงุญ ุงูุดุญู:
```
๐ฏ =================================================
โ SHIPPING SUCCESS - ALL PARAMETERS EXTRACTED
๐ฏ =================================================
๐ Client Order Ref: 20250728-041
๐ฆ Order AWB Number: LUBNGZ0000055
๐ Consignment Number: P001906351
...

๐ =================================================
๐ STARTING SHIPPING DATA UPDATE
๐ =================================================
๐ Order Number: ORD-20250728-041
๐ฆ Update Data: {...}
...

โ =================================================
๐ SHIPPING DATA UPDATED SUCCESSFULLY
โ =================================================
๐ Updated Order ID: 123
๐ฆ Updated Fields: ["external_awb_number", "consignment_number", ...]
๐ Update Message: ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูุดุญู ุจูุฌุงุญ
...

๐ค =================================================
๐ READY FOR NEXT API CALL
๐ค =================================================
๐ Database Update Status:
โ Database updated successfully
๐ฆ Updated fields: ["external_awb_number", "consignment_number"]
๐ค =================================================
```

### ูู ุญุงูุฉ ูุดู ุงูุชุญุฏูุซ:
```
โ =================================================
๐ฅ SHIPPING UPDATE FAILED
โ =================================================
๐ HTTP Status: 404
๐ Error Message: ูู ูุชู ุงูุนุซูุฑ ุนูู ุทูุจ ุจูุฐุง ุงูุฑูู
โ =================================================

๐ Database Update Status:
โ Database update failed: ูุดู ุชุญุฏูุซ ุจูุงูุงุช ุงูุดุญู...
```

## ๐๏ธ ุงูุชุญูู ุงููุฏูู

### 1. ุชุญุฏูุซ ุจุณูุท (AWB ููุท):
```javascript
import { updateSimpleAWB } from './services/shippingUpdate.js';

await updateSimpleAWB('ORD-20250728-041', 'LUBNGZ0000055');
```

### 2. ุชุญุฏูุซ ูุฎุตุต:
```javascript
import { updateShippingData } from './services/shippingUpdate.js';

await updateShippingData('ORD-20250728-041', {
  external_awb_number: 'LUBNGZ0000055',
  consignment_number: 'P001906351',
  external_shipping_details: {
    status: 'shipped',
    tracking_url: 'https://track.example.com'
  }
});
```

### 3. ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงูุดุงููุฉ:
```javascript
import { createShippingWithAutoUpdate } from './services/index.js';

const result = await createShippingWithAutoUpdate(orderData);
// ุงูุชุญุฏูุซ ูุญุฏุซ ุชููุงุฆูุงู
```

## ๐ ุงูุจูุงูุงุช ุงูููุญุฏุซุฉ

### ูุง ูุชู ุชุญุฏูุซู ุชููุงุฆูุงู:
```json
{
  "client_order_ref": "20250728-041",
  "order_awb_number": "LUBNGZ0000055", 
  "external_order_ref": "20250728-041",
  "external_awb_number": "LUBNGZ0000055",
  "external_item_awb_number": "[LUBNGZ0000055,]",
  "external_reference_id": "20250728-041",
  "consignment_number": "P001906351",
  "external_request_id": "prod_mw_20250728...",
  "external_shipping_details": {
    "type_of_order": "Forward",
    "order_number": "20250728-041",
    "Total_Number_of_Packages_in_Shipment": "1",
    "status": "created"
  }
}
```

## โ๏ธ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุงูุณููู ุงูุญุงูู:
- **ุฅุฐุง ูุฌุญ ุงูุดุญู ููุดู ุงูุชุญุฏูุซ**: ุงูุทูุจ ูุณุชูุฑ ุจูุฌุงุญ โ
- **ุงูุชุญุฏูุซ ูุง ูุคุซุฑ ุนูู ูุฌุงุญ ุงูุทูุจ** ๐ก๏ธ
- **ุงูุฃุฎุทุงุก ุชูุณุฌู ูู ุงููููุณูู** ๐
- **ูุชู ุฅุถุงูุฉ ูุนูููุงุช ุงูุฎุทุฃ ููุงุณุชุฌุงุจุฉ** ๐

### ูู Checkout.jsx:
```javascript
if (shippingResult.databaseUpdate) {
  if (shippingResult.databaseUpdate.success) {
    console.log('โ Order database updated with shipping info');
  } else {
    console.warn('โ๏ธ Order database update failed:', shippingResult.databaseUpdate.error);
    // ูููู ุฅุถุงูุฉ ุฅุดุนุงุฑ ูููุทูุฑ ุฃู ูุธุงู ุชุณุฌูู ุงูุฃุฎุทุงุก
  }
}
```

## ๐ง ุฅุนุฏุงุฏุงุช ุงูู API

### Base URL:
```javascript
const SHIPPING_UPDATE_API_BASE = 'https://app.quickly.codes/luban-elgazal/public/api';
const SHIPPING_UPDATE_ENDPOINT = '/external-order/update-shipping';
```

### ูููู ุชุฎุตูุตูุง ูู `src/services/shippingUpdate.js`

## ๐ ุงููุฒุงูุง

### 1. **ุงุชูุชุฉ ูุงููุฉ** ๐ค
- ูุง ุญุงุฌุฉ ูุชุฏุฎู ูุฏูู
- ุชุญุฏูุซ ููุฑู ุจุนุฏ ูุฌุงุญ ุงูุดุญู

### 2. **ูุฑููุฉ ุนุงููุฉ** ๐ง
- ูููู ุชุญุฏูุซ ุญููู ูุญุฏุฏุฉ
- ุฏุนู ููุชุญุฏูุซ ุงููุฏูู
- ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต

### 3. **ุชุชุจุน ุดุงูู** ๐
- ุชุณุฌูู ููุตู ููุนูููุงุช
- ูุนูููุงุช ูููุฏุฉ ููุชุดุฎูุต
- ุนุฑุถ ูุงุถุญ ูููุชุงุฆุฌ

### 4. **ููุงููุฉ ููุฃุฎุทุงุก** ๐ก๏ธ
- ูุดู ุงูุชุญุฏูุซ ูุง ูุคุซุฑ ุนูู ุงูุทูุจ
- ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- ุงุณุชูุฑุงุฑูุฉ ุงูุนูู ูุถูููุฉ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ูููุทูุฑ:
1. **ูุฑุงุฌุนุฉ ุงููููุณูู** ููุชุฃูุฏ ูู ูุฌุงุญ ุงูุชุญุฏูุซุงุช
2. **ุชุฎุตูุต ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** ุญุณุจ ุงุญุชูุงุฌุงุช ุงููุดุฑูุน
3. **ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏู** ุฅุฐุง ูุฒู ุงูุฃูุฑ

### ููุจุงู ุฅูุฏ:
1. **ุชูููุฐ API ุงูุชุญุฏูุซ** ุญุณุจ ุงููุซุงุฆู ุงููุฑููุฉ
2. **ุงุฎุชุจุงุฑ ุฌููุน ุงูุณููุงุฑูููุงุช** (ูุฌุงุญ/ูุดู/ุจูุงูุงุช ูุงูุตุฉ)
3. **ุชูุนูู ุงููุธุงู** ูู ุงูุฅูุชุงุฌ

## ๐ ุงูุฏุนู

ูู ุญุงูุฉ ุฃู ูุดุงูู ูุน ูุธุงู ุงูุชุญุฏูุซ:
1. **ุชุญูู ูู ุงููููุณูู** ููุฑุณุงุฆู ุงูุชูุตูููุฉ
2. **ุฑุงุฌุน ูุนุงููุงุช ุงูู API** ูู `SHIPPING_API_PARAMETERS.md`
3. **ุชุฃูุฏ ูู ุชูููุฐ API ุงูุชุญุฏูุซ** ุนูู ุงูุฎุงุฏู

---

**ุชุงุฑูุฎ ุงูุชูููุฐ:** ููููู 2025  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุงุฎุชุจุงุฑ  
**ุงูุชุญุฏูุซ ุงูุชููุงุฆู:** โ ูููุนู 